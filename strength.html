<html>
<title>The ATLAS Project</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://thousandlives.github.io/atlas_functions.js"></script>
<script>

	if (localStorage.BinaryExercise) {null} 
	else {
		localStorage.BinaryExercise = new Question_Binary("exercise","exercised");
	}
	
	$(document).ready(function(){
	
		$("#ExYes").click(function(){
			console.log("Yes clicked");
			now = new Date();
			today = new Date(now.getFullYear(),now.getMonth(),now.getDate());
				
			if (localStorage.BinaryExercise.lastYes == "Never") {
				console.log("No past Exercise detected, creating new object")
				localStorage.BinaryExercise.lastYes = today.toString();
				localStorage.BinaryExercise.totalYes++;
			} else {
				var dayGap = checkDate(today.toString());
				console.log("Past Exercise detected with a day gap of "+dayGap);
				if (dayGap > 0) {
					localStorage.BinaryExercise.totalYes ++;
					localStorage.BinaryExercise.totalNo += dayGap - 1;
					localStorage.BinaryExercise.lastYes = today.toString();
				}
			}
			RefreshPage();
		});
		
		$("#ResetAll").click(ResetAllProgress);
		
		RefreshPage();
		
	});
		
	//
	function RefreshPage() {
		$("#ExRate").html(localStorage.BinaryExercise.rate);
		$("#ExYesCount").html(localStorage.BinaryExercise.totalYes);
		$("#ExNoCount").html(localStorage.BinaryExercise.totalNo);
		
		$("#LastEx").html(localStorage.BinaryExercise.lastYes);
		
		$("#LastModified").html(document.lastModified);
		
		console.log("The page has been refreshed.");
	};

	function ResetAllProgress() {
		console.log("Reset clicked");
		localStorage.BinaryExercise = new Question_Binary("exercise","exercised");
		RefreshPage();
		binary = localStorage.BinaryExercise
		console.log(binary.verb);
	};
	

	
</script>
	
<body>
	<br>
	<h1><b>Strength</b></h1><br>
	<br>
	<br>
	<h3><i>Part 1</i>: Exercise</h3><br>
	You must exercise once a day to succeed. Have you exercised today?<br>
	<button id="ExYes" type="button">Yes</button><br>
	You have exercised <span id="ExYesCount">ERROR</span> times, and failed to exercise <span id="ExNoCount">ERROR</span> times.<br>
	That works out to a rate of <span id="ExRate">ERROR</span>%. Make of that what you will.<br>
	Last Exercise Confirmation: <span id="LastEx">ERROR</span><br>
	<span id="ExFail"></span><br>
	<br><br><br>
	<br><br><br>
	<button id="ResetAll" type="button">Reset All Progress</button><br>
	<br><br><br>
	Page last modified: <span id="LastModified">ERROR</span>
	

</body>
</html>
